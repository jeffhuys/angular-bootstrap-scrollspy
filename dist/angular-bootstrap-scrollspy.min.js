/**
 * angular-bootstrap-scrollspy
 * @version v0.0.2 - 2013-07-08
 * @link https://github.com/mgcrea/angular-bootstrap-scrollspy
 * @author Olivier Louvignes <olivier@mg-crea.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.bootstrap.scrollspy",["mgcrea.jquery","mgcrea.debounce"]).directive("bs-scrollspy",["$window","$location","$routeParams","debounce","$",function(a,b,c,d,e){var f,g,h=Array.prototype.slice,i=[],j=[],k=function(a){i=[],j=[],h.call(e(a.target).children()).map(function(a){return[e(a).offset().top,a.id]}).sort(function(a,b){return a[0]-b[0]}).forEach(function(a){i.push(a[0]),j.push(a[1])}),a.offset&&(f="auto"===a.offset?i.length&&i[0]:1*a.offset)},l=function(a,b,c){if(i.length){var d=b[0].scrollTop+f;if(b[0].scrollHeight||document.body.scrollHeight,d<i[0]&&g!==j[0])return m(a,j[0],c);for(var e=i.length;e--;)g!==j[e]&&d>=i[e]&&(!i[e+1]||d<=i[e+1])&&m(a,j[e],c)}},m=function(a,c,d){g=c,e(d.target+" > .active").removeClass("active"),e("#"+g).addClass("active"),a.$apply(b.search(d.search||"page",c))};return{restrict:"EAC",link:function(b,c,e){var f=function(){k(e)},g=d(f,300);b.$on("$viewContentLoaded",g),b.$on("$includeContentLoaded",g),angular.element(a).bind("scroll",function(){l(b,c,e)})}}}]);